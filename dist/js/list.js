"use strict";$(function(){var n=!1;function s(a){var n=JSON.parse(a).map(function(a){return'<dl data-id="'+a.id+'">\n                         <dt>\n                             <a href="#">\n                                 <img src="../'+a.url_1+'" alt="" width="200" height="200"/>\n                             </a>\n                         </dt>\n                         <dd class="pro-name">\n                             <a href="#">'+a.goodname+'</a>\n                         </dd>\n                         <dd class="pro-price">\n                             ￥\n                             <span>\n                                 <span>'+a.price_no5+'</span>\n                             </span>\n                             <span class="zhekou">'+a.zhekou+'</span>\n                         </dd>\n                         <dd class="buybtn">\n                             <a href="#">加入购物车</a>\n                             <a href="#" class="shouc">收藏</a>\n                         </dd>\n                     </dl>'}).join("");$(".cplist")[0].innerHTML=n}$("h3").on("click","span",function(a){n?($($(this)).parent().next().css("display","block"),$($(this)).prop("class","open")):($($(this)).parent().next().css("display","none"),$($(this)).prop("class","close")),n=!n});var a=!1;function t(a){$(".cplist")[0].innerHTML=a.map(function(a){return'<dl data-id="'+a.id+'">\n                            <dt>\n                                <a href="#">\n                                    <img src="../'+a.url_1+'" alt="" width="200" height="200"/>\n                                </a>\n                            </dt>\n                            <dd class="pro-name">\n                                <a href="#">'+a.goodname+'</a>\n                            </dd>\n                            <dd class="pro-price">\n                                ￥\n                                <span>\n                                    <span>'+a.price_no5+'</span>\n                                </span>\n                                <span class="zhekou">'+a.zhekou+'</span>\n                            </dd>\n                            <dd class="buybtn buybtn1">\n                                <a href="javascript:;" class="buy">加入购物车</a>\n                                <a href="#" class="shouc">收藏</a>\n                            </dd>\n                        </dl>'}).join("")}function c(){$(".buy").on("click",function(){console.log(666);var a=$(this).parent().parent().data("id");console.log(a),location.href="details.html?id="+a})}$(".curr").on("click",function(){a?($.ajax({type:"post",url:"../api/list.php",async:!0,data:{fangfa:"shengxu"},success:function(a){s(a)}}),$(".curr").addClass("up")):($.ajax({type:"post",url:"../api/list.php",async:!0,data:{fangfa:"jiangxu"},success:function(a){s(a)}}),$(".curr").removeClass("up").addClass("down")),a=!a});var i=document.getElementById("page2"),e=1,r="";$.ajax({type:"post",url:"../api/list.php",async:!0,data:{fangfa:"fenye",num:4,currentPage:e},success:function(a){var n=JSON.parse(a);t(n.data),c(),r=Math.ceil(n.total/n.num);var s=n.total;$("strong").html(s);for(var e=0;e<r;e++)i.innerHTML+="<span>"+(e+1)+"</span>",i.children[0].className="active";i.onclick=function(a){if("SPAN"==(a=window.event||event).target.tagName){for(var n=0;n<r;n++)i.children[n].className="";a.target.className="active";var s=a.target.innerHTML;$(".page").html(s),$(".pages").html(r),$.ajax({type:"post",url:"../api/list.php",async:!0,data:{currentPage:s,fangfa:"fenye",num:4},success:function(a){t(JSON.parse(a).data),c()}})}}}}),$(".disa-btn").on("click",function(){1<=--e&&($("#page2").children().eq(e-1).addClass("active").siblings().removeClass(),$(".page").html(e),$.ajax({type:"post",url:"../api/list.php",async:!0,data:{currentPage:e,fangfa:"fenye",num:4},success:function(a){t(JSON.parse(a).data)}}))}),$(".xiayiye").on("click",function(){++e<=r&&($("#page2").children().eq(e-1).addClass("active").siblings().removeClass(),$(".page").html(e),$.ajax({type:"post",url:"../api/list.php",async:!0,data:{currentPage:e,fangfa:"fenye",num:4},success:function(a){t(JSON.parse(a).data)}}))})});